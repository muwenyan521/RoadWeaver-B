# RoadWeaver 配置界面访问指南

## 🎮 如何访问配置界面

### Fabric 平台

#### 方法 1: 通过 Mod Menu（推荐）
1. 启动游戏（Fabric 1.21.1）
2. 进入主菜单
3. 点击 **"Mods"** 按钮
4. 在模组列表中找到 **"RoadWeaver"**
5. 点击模组条目
6. 点击右下角的 **"配置"** 按钮 ⚙️
7. 配置界面打开 ✅

**前置要求**:
- ✅ Mod Menu (11.0.2)
- ✅ Cloth Config API (15.0.140)

#### 方法 2: 在游戏中按快捷键
1. 进入游戏世界
2. 按下 **H 键**（默认）打开调试地图
3. 点击右上角的 **"配置"** 按钮

#### 方法 3: 手动编辑配置文件
编辑文件: `.minecraft/config/roadweaver.json`

---

### NeoForge 平台

#### 方法 1: 通过 NeoForge 模组菜单（推荐）
1. 启动游戏（NeoForge 1.21.1）
2. 进入主菜单
3. 点击 **"Mods"** 按钮（NeoForge 内置）
4. 在模组列表中找到 **"RoadWeaver"**
5. 点击模组条目
6. 点击右下角的 **"Config"** 按钮 ⚙️
7. 配置界面打开 ✅

**前置要求**:
- ⭐ Cloth Config API (15.0.140) - 推荐但非必需

**注意**: 如果没有安装 Cloth Config API，Config 按钮将不可用，需要手动编辑配置文件。

#### 方法 2: 在游戏中按快捷键
1. 进入游戏世界
2. 按下 **H 键**（默认）打开调试地图
3. 点击右上角的 **"配置"** 按钮

#### 方法 3: 手动编辑配置文件
编辑文件: `.minecraft/config/roadweaver.json`

---

## 📋 配置界面功能

### 1. 结构设置
- **要定位的结构**: 输入结构标签或ID（支持通配符）
  - 例如: `#minecraft:village`, `youkaishomecoming:*`
- **结构搜寻半径**: 搜寻范围（50-200区块）

### 2. 预生成设置
- **世界加载时定位的结构数量**: 初始定位数量（1-50）
- **同时生成道路数量上限**: 并发任务数（1-256）
- **结构搜寻触发距离**: 触发新搜寻的距离（150-1500区块）

### 3. 道路设置
- **地形平均半径**: 道路平滑程度（0-5）
- **允许人工道路**: 石砖、石板等材料
- **允许自然道路**: 泥土、砂砾等材料
- **结构与道路距离**: 大型装饰距离道路的距离（3-8格）
- **最大高度差**: 道路允许的最大坡度（3-10）
- **地形稳定性检查**: 地形崎岖度阈值（2-10）

### 4. 装饰设置
- **放置路标而非道路**: 测试模式
- **生成路边栏杆**: 间断式栏杆装饰
- **生成秋千**: 秋千装饰结构
- **生成长椅**: 长椅装饰结构
- **生成凉亭**: 凉亭装饰结构

### 5. 手动模式设置
- **手动模式最大高度差**: 手动连接时的高度差（3-20）
- **手动模式地形稳定性**: 手动连接时的稳定性（2-20）
- **手动模式忽略水域**: 是否忽略水域成本

---

## 🔧 配置文件格式

配置文件位置: `.minecraft/config/roadweaver.json`

```json
{
  "structuresToLocate": [
    "#minecraft:village"
  ],
  "structureSearchRadius": 100,
  "initialLocatingCount": 7,
  "maxConcurrentRoadGeneration": 128,
  "structureSearchTriggerDistance": 500,
  "averagingRadius": 1,
  "allowArtificial": true,
  "allowNatural": true,
  "structureDistanceFromRoad": 4,
  "maxHeightDifference": 5,
  "maxTerrainStability": 4,
  "placeWaypoints": false,
  "placeRoadFences": true,
  "placeSwings": false,
  "placeBenches": false,
  "placeGloriettes": false,
  "manualMaxHeightDifference": 10,
  "manualMaxTerrainStability": 8,
  "manualIgnoreWater": true
}
```

---

## 📊 平台对比

| 功能 | Fabric | NeoForge |
|------|--------|----------|
| 配置界面 | ✅ 通过 Mod Menu | ✅ 通过内置模组菜单 |
| 必需依赖 | Mod Menu + Cloth Config | 仅 Cloth Config（推荐） |
| 快捷键访问 | ✅ H键 | ✅ H键 |
| 配置文件 | ✅ 相同 | ✅ 相同 |
| 手动编辑 | ✅ 支持 | ✅ 支持 |

---

## ⚠️ 常见问题

### Q: 找不到 "Mods" 按钮？
**A**: 
- **Fabric**: 需要安装 Mod Menu 模组
- **NeoForge**: NeoForge 内置模组列表，应该自动显示

### Q: 点击 Config 按钮没反应？
**A**: 
- **Fabric**: 检查是否安装了 Cloth Config API
- **NeoForge**: 检查是否安装了 Cloth Config API（推荐）

### Q: 没有 Cloth Config 怎么办？
**A**: 
- **Fabric**: 必须安装，否则无法使用配置界面
- **NeoForge**: 可以不安装，但需要手动编辑 `config/roadweaver.json`

### Q: 配置保存在哪里？
**A**: `.minecraft/config/roadweaver.json`，两个平台共用相同格式

### Q: 修改配置后需要重启游戏吗？
**A**: 
- 大部分配置立即生效
- 结构搜寻相关配置需要重新加载世界
- 装饰设置影响新生成的道路

### Q: 如何重置配置？
**A**: 删除 `config/roadweaver.json` 文件，重启游戏后会自动生成默认配置

---

## 🎯 快速配置推荐

### 性能优先
```json
{
  "initialLocatingCount": 3,
  "maxConcurrentRoadGeneration": 32,
  "structureSearchTriggerDistance": 1000,
  "placeRoadFences": false,
  "placeSwings": false,
  "placeBenches": false,
  "placeGloriettes": false
}
```

### 美观优先
```json
{
  "initialLocatingCount": 10,
  "maxConcurrentRoadGeneration": 128,
  "structureSearchTriggerDistance": 300,
  "placeRoadFences": true,
  "placeSwings": true,
  "placeBenches": true,
  "placeGloriettes": true
}
```

### 多模组兼容
```json
{
  "structuresToLocate": [
    "#minecraft:village",
    "youkaishomecoming:*",
    "dungeons_arise:*",
    "mvs:*"
  ],
  "structureSearchRadius": 150,
  "initialLocatingCount": 15
}
```

---

## 📝 更新日志

### 2025-10-11
- ✅ NeoForge 添加模组菜单配置界面集成
- ✅ 两个平台功能对等
- ✅ 配置文件格式统一

---

**最后更新**: 2025-10-11  
**适用版本**: RoadWeaver 1.0.0 for Minecraft 1.21.1
